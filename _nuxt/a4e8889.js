(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{896:function(t,e,n){"use strict";var r=n(10),o=n(20);r({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return o(URL.prototype.toString,this)}})},897:function(t,e,n){var content=n(905);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(101).default)("0f6ff25f",content,!0,{sourceMap:!1})},904:function(t,e,n){"use strict";n(897)},905:function(t,e,n){var r=n(100)(!1);r.push([t.i,".fingerprint,.stakeholder{padding-left:10px;margin:5px;border-style:solid}",""]),t.exports=r},907:function(t,e,n){"use strict";n.r(e);var r=n(35),o=(n(67),n(44),n(80),n(55),n(25),n(485),n(125),n(147),n(99),n(98),n(896),n(56),n(68),n(51),n(69),n(32)),c=n(21),d=(n(78),n(45),n(192),n(272),n(57)),l=n(5),v=n(79),m=n(269);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function _(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h={name:"EditISCN",data:function(){return{INDEXER:v.d,iscnId:"",iscnIdPrefix:"",owner:"",contentMetadata:{},stakeholders:{},contentFingerprints:{},recordNotes:"",defaultFields:["@type","description","url","name","keywords","sameAs","version","usageInfo"],excludeFields:["@context"],newField:"",jsonMode:!1,rawJSON:"",parseError:"",WIDTH:150,contributionTypes:["author","editor","publisher","creator","maintainer"]}},fetch:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.iscnIdPrefix=Object(m.a)(t.$route.params.id),e.next=3,t.$axios.$get("/iscn/records?iscn_id_prefix=".concat(t.iscnIdPrefix,"&reverse=true&limit=1"));case 3:n=e.sent,r=n.records[0].data,t.iscnId=r["@id"],Object.assign(t,r),l.a.set(t.contentMetadata,"keywords",r.contentMetadata.keywords.split(",").filter((function(t){return!!t}))),l.a.set(t.contentMetadata,"sameAs",r.contentMetadata.sameAs||[]);case 9:case"end":return e.stop()}}),e)})))()},computed:_(_({},Object(d.e)("wallet",{walletAddress:function(t){return t.walletAddress},txHash:function(t){return t.txHash},isSending:function(t){return t.isSending},error:function(t){return t.error}})),{},{lines:function(){return this.rawJSON.split("\n").length},toJSON:function(){var t=this.contentMetadata,e=this.stakeholders,n=this.contentFingerprints,r=this.recordNotes;return JSON.stringify({contentMetadata:_(_({},t),{},{keywords:t.keywords.join(","),sameAs:t.sameAs.filter((function(s){return!!s}))}),stakeholders:e,contentFingerprints:n,recordNotes:r},null,"\t")}}),methods:{autoResize:function(t){t.target.style.height="auto",t.target.style.height="".concat(t.target.scrollHeight,"px")},deleteStakeholer:function(i){this.stakeholders=this.stakeholders.filter((function(t,e){return e!==i}))},newStakeholer:function(){this.stakeholders.push({entity:{}})},deleteFingerprint:function(i){this.contentFingerprints=this.contentFingerprints.filter((function(t,e){return e!==i}))},newFingerprint:function(){this.contentFingerprints.push("")},deleteKeyword:function(i){this.contentMetadata.keywords=this.contentMetadata.keywords.filter((function(t,e){return e!==i}))},newKeyword:function(){this.contentMetadata.keywords.push("")},deleteSameAs:function(i){this.contentMetadata.sameAs=this.contentMetadata.sameAs.filter((function(t,e){return e!==i}))},newSameAs:function(){this.contentMetadata.sameAs.push("")},addField:function(){this.contentMetadata[this.newField]="",this.newField=""},deleteField:function(t){delete this.contentMetadata[t],this.$forceUpdate()},updateISCN:function(){if(!this.jsonMode||this.save()){var t=this.stakeholders,e=this.contentFingerprints,n=this.recordNotes;this.$store.dispatch("wallet/updateISCN",{iscnId:this.iscnId,payload:_({stakeholders:t,contentFingerprints:e,recordNotes:n},this.contentMetadata)})}},save:function(){try{var t=JSON.parse(this.rawJSON),e=t.contentMetadata,n=t.stakeholders,r=t.contentFingerprints,o=t.recordNotes;return this.contentMetadata=_(_({},e),{},{keywords:Array.isArray(e.keywords)?e.keywords.filter((function(t){return!!t})):e.keywords.split(",").filter((function(t){return!!t})),sameAs:e.sameAs.filter((function(s){return!!s}))}),this.contentFingerprints=r,this.stakeholders=n,this.recordNotes=o,this.parseError="",!0}catch(t){return this.parseError=t,!1}},toggleMode:function(){if(this.jsonMode){if(!this.save())return}else this.rawJSON=this.toJSON;this.jsonMode=!this.jsonMode}}},w=(n(904),n(43)),component=Object(w.a)(h,(function(){var t=this,e=t._self._c;return t.$fetchState.pending?e("p",[t._v("\n  Loading...\n")]):t.$fetchState.error?e("p",[t._v("\n  An error occurs :(\n")]):e("div",[e("button",{staticClass:"button",on:{click:t.toggleMode}},[t._v("\n    Change to "+t._s(t.jsonMode?"Field Mode":"JSON Mode")+"\n  ")]),t._v(" "),t.jsonMode?e("div",[e("h2",[t._v("\n      JSON Mode\n    ")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.rawJSON,expression:"rawJSON"}],attrs:{cols:"150",rows:t.lines},domProps:{value:t.rawJSON},on:{input:function(e){e.target.composing||(t.rawJSON=e.target.value)}}}),t._v(" "),e("br"),t._v(" "),t.parseError?e("p",[t._v("\n      "+t._s(t.parseError)+"\n    ")]):t._e(),t._v(" "),e("button",{staticClass:"button",on:{click:t.save}},[t._v("\n      Save\n    ")])]):e("div",[e("h1",[t._v("Edit "+t._s(t.iscnId))]),t._v(" "),t.owner!==t.walletAddress?e("p",{staticClass:"error"},[e("strong",[t._v("Warning: You are not the owner of this record")])]):t._e(),t._v(" "),e("p",[t._v("\n      Owner:\n      "),e("UserLink",{attrs:{wallet:t.owner}})],1),t._v(" "),e("hr"),t._v(" "),e("h2",[t._v("ContentMetadata")]),t._v(" "),e("div",[e("p",[e("label",[t._v("name:\n          "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.contentMetadata.name,expression:"contentMetadata.name"}],attrs:{type:"text",size:"50"},domProps:{value:t.contentMetadata.name},on:{input:function(e){e.target.composing||t.$set(t.contentMetadata,"name",e.target.value)}}})])]),t._v(" "),e("p",[e("label",[t._v("url:\n          "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.contentMetadata.url,expression:"contentMetadata.url"}],attrs:{type:"text",size:"150"},domProps:{value:t.contentMetadata.url},on:{input:function(e){e.target.composing||t.$set(t.contentMetadata,"url",e.target.value)}}})])]),t._v(" "),e("p",[e("label",[t._v("type:\n          "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.contentMetadata["@type"],expression:"contentMetadata['@type']"}],attrs:{type:"text",size:"10"},domProps:{value:t.contentMetadata["@type"]},on:{input:function(e){e.target.composing||t.$set(t.contentMetadata,"@type",e.target.value)}}})])]),t._v(" "),e("p",[e("label",[t._v("version:\n          "),e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.contentMetadata.version,expression:"contentMetadata.version",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.contentMetadata.version},on:{input:function(e){e.target.composing||t.$set(t.contentMetadata,"version",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]),t._v(" "),e("p",[t._v("description:")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.contentMetadata.description,expression:"contentMetadata.description"}],attrs:{cols:t.WIDTH},domProps:{value:t.contentMetadata.description},on:{input:[function(e){e.target.composing||t.$set(t.contentMetadata,"description",e.target.value)},t.autoResize]}}),t._v(" "),e("p",[e("label",[t._v("usage info:\n          "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.contentMetadata.usageInfo,expression:"contentMetadata.usageInfo"}],attrs:{type:"text",size:"30"},domProps:{value:t.contentMetadata.usageInfo},on:{input:function(e){e.target.composing||t.$set(t.contentMetadata,"usageInfo",e.target.value)}}})])]),t._v(" "),e("p",[t._v("keywords")]),t._v(" "),e("div",[t._l(t.contentMetadata.keywords,(function(n,i){return e("div",{key:i,staticClass:"keyword"},[e("p",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.contentMetadata.keywords[i],expression:"contentMetadata.keywords[i]"}],attrs:{type:"text",size:"50"},domProps:{value:t.contentMetadata.keywords[i]},on:{input:function(e){e.target.composing||t.$set(t.contentMetadata.keywords,i,e.target.value)}}}),t._v(" "),e("button",{staticClass:"button",on:{click:function(e){return t.deleteKeyword(i)}}},[t._v("\n              Delete\n            ")])])])})),t._v(" "),e("button",{staticClass:"button",on:{click:t.newKeyword}},[t._v("\n          New Keyword\n        ")])],2),t._v(" "),e("p",[t._v("sameAs URLs")]),t._v(" "),e("div",[t._l(t.contentMetadata.sameAs,(function(n,i){return e("div",{key:i,staticClass:"sameAs"},[e("p",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.contentMetadata.sameAs[i],expression:"contentMetadata.sameAs[i]"}],attrs:{type:"text",size:"50"},domProps:{value:t.contentMetadata.sameAs[i]},on:{input:function(e){e.target.composing||t.$set(t.contentMetadata.sameAs,i,e.target.value)}}}),t._v(" "),e("button",{staticClass:"button",on:{click:function(e){return t.deleteSameAs(i)}}},[t._v("\n              Delete\n            ")])])])})),t._v(" "),e("button",{staticClass:"button",on:{click:t.newSameAs}},[t._v("\n          New sameAs URL\n        ")])],2),t._v(" "),t._l(Object.entries(t.contentMetadata).filter((function(e){var n=Object(r.a)(e,1)[0];return!(t.defaultFields.includes(n)||t.excludeFields.includes(n))})),(function(n){var o=Object(r.a)(n,1)[0];return e("p",{key:o},[e("label",[t._v(t._s(o)+":\n          "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.contentMetadata[o],expression:"contentMetadata[key]"}],attrs:{type:"text",size:"100"},domProps:{value:t.contentMetadata[o]},on:{input:function(e){e.target.composing||t.$set(t.contentMetadata,o,e.target.value)}}}),t._v(" "),e("button",{staticClass:"button",on:{click:function(e){return t.deleteField(o)}}},[t._v("Delete")])])])})),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newField,expression:"newField"}],attrs:{type:"text"},domProps:{value:t.newField},on:{input:function(e){e.target.composing||(t.newField=e.target.value)}}}),t._v(" "),e("button",{staticClass:"button",on:{click:t.addField}},[t._v("\n        Add field\n      ")])],2),t._v(" "),e("hr"),t._v(" "),e("h2",[t._v("Stakeholders")]),t._v(" "),e("div",[t._l(t.stakeholders,(function(n,i){return e("div",{key:i,staticClass:"stakeholder"},[e("p",[e("label",[t._v("Id:\n            "),e("input",{directives:[{name:"model",rawName:"v-model",value:n.entity["@id"],expression:"holder.entity['@id']"}],attrs:{type:"text",size:"50"},domProps:{value:n.entity["@id"]},on:{input:function(e){e.target.composing||t.$set(n.entity,"@id",e.target.value)}}})])]),t._v(" "),e("p",[e("label",[t._v("Name:\n            "),e("input",{directives:[{name:"model",rawName:"v-model",value:n.entity.name,expression:"holder.entity.name"}],attrs:{type:"text",size:"20"},domProps:{value:n.entity.name},on:{input:function(e){e.target.composing||t.$set(n.entity,"name",e.target.value)}}})])]),t._v(" "),e("p",[e("label",[t._v("Contribution Type:\n            "),e("select",{directives:[{name:"model",rawName:"v-model",value:n.contributionType,expression:"holder.contributionType"}],on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(n,"contributionType",e.target.multiple?r:r[0])}}},t._l(t.contributionTypes,(function(n){return e("option",{key:n,domProps:{value:"http://schema.org/".concat(n)}},[t._v("\n                "+t._s(n)+"\n              ")])})),0)])]),t._v(" "),e("p",[e("label",[t._v("Reward Proportion:\n            "),e("input",{directives:[{name:"model",rawName:"v-model.number",value:n.rewardProportion,expression:"holder.rewardProportion",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:n.rewardProportion},on:{input:function(e){e.target.composing||t.$set(n,"rewardProportion",t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]),t._v(" "),e("button",{staticClass:"button",on:{click:function(e){return t.deleteStakeholer(i)}}},[t._v("\n          Delete\n        ")])])})),t._v(" "),e("button",{staticClass:"button",on:{click:t.newStakeholer}},[t._v("\n        New Stakeholder\n      ")])],2),t._v(" "),e("hr"),t._v(" "),e("h2",[t._v("ContentFingerprints")]),t._v(" "),e("div",[t._l(t.contentFingerprints,(function(n,i){return e("div",{key:i,staticClass:"fingerprint"},[e("p",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.contentFingerprints[i],expression:"contentFingerprints[i]"}],attrs:{type:"text",size:"50"},domProps:{value:t.contentFingerprints[i]},on:{input:function(e){e.target.composing||t.$set(t.contentFingerprints,i,e.target.value)}}})]),t._v(" "),e("button",{staticClass:"button",on:{click:function(e){return t.deleteFingerprint(i)}}},[t._v("\n          Delete\n        ")])])})),t._v(" "),e("button",{staticClass:"button",on:{click:t.newFingerprint}},[t._v("\n        New Fingerprint\n      ")])],2),t._v(" "),e("hr"),t._v(" "),e("h2",[t._v("Record Notes")]),t._v(" "),e("p",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.recordNotes,expression:"recordNotes"}],attrs:{type:"text",size:"20"},domProps:{value:t.recordNotes},on:{input:function(e){e.target.composing||(t.recordNotes=e.target.value)}}})])]),t._v(" "),e("hr"),t._v(" "),e("button",{staticClass:"button",attrs:{disabled:t.owner!==t.walletAddress},on:{click:t.updateISCN}},[t._v("\n    Update\n  ")]),t._v(" "),t.owner!==t.walletAddress?e("p",{staticClass:"error"},[e("strong",[t._v("Warning: You are not the owner of this record")])]):t._e(),t._v(" "),t.isSending?e("p",[t._v("\n    Sending...\n  ")]):e("p",[e("a",{attrs:{href:"".concat(t.INDEXER,"/txs/").concat(t.txHash)}},[t._v("\n      "+t._s(t.txHash)+"\n    ")])]),t._v(" "),t.error?e("p",{staticClass:"error"},[t._v("\n    "+t._s(t.error)+"\n  ")]):t._e(),t._v(" "),e("hr"),t._v(" "),e("h2",[t._v("Output JSON")]),t._v(" "),e("pre",[e("code",[t._v(t._s(t.toJSON))])])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{UserLink:n(480).default})}}]);